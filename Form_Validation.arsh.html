<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form</title>
</head>
<body>
    <form name="form1">
        <h2> Registration Form </h2>

        <label> Enter Name : </label>
        <input type="text" id="name" oninput="name_validate()">
        <span id="errorname" style="color:red;"></span><br><br>

        <label> Enter Email Id : </label>
        <input type="text" id="email" oninput="email_validate()">
        <span id="erroremail" style="color:red;"></span><br><br>

        <label> Enter Age : </label>
        <input type="text" id="age" oninput="age_validate()">
        <span id="errorage" style="color:red;"></span><br><br>

        <label> Gender : </label>
        <input type="radio" name="gender" id="male">Male
        <input type="radio" name="gender" id="female">Female
        <span id="errorgender" style="color:red;"></span><br>
 
        <p> Course : 
        <select id="course" name="course">
            <option value="Select Course"> Select Course </option>
            <option value="Javascript"> Javascript </option>
            <option value="Data Structure"> Data Structure </option>
            <option value="HTML"> HTML </option>
            <option value="RDBMS"> RDBMS </option>
            <option value="C++"> C++ </option>
        </select>
        <span id="errorcourse" style="color:red;"></span></p>

        <p for="hobbies">Hobbies : 
        <input type="checkbox" name="hobby" value="Reading" id="reading">Reading
        <input type="checkbox" name="hobby" value="Singing" id="singing">Singing
        <input type="checkbox" name="hobby" value="Travelling" id="travelling">Travelling
        <span id="errorhobby" style="color:red;"></span><br><br></p>

        <input type="button" value="Display" onclick="show_data()">
    </form>

    <br><br>
    <div id="display_invalid" style="color:red;"></div>
    <br><br>
    <div id="display2" style="color:green;"></div>

    <script>
            let name1=document.getElementById("name");
            let email1=document.getElementById("email");
            let age1=document.getElementById("age");
            let male1=document.getElementById("male");
            let female1=document.getElementById("female");
            let course1=document.forms["form1"]["course"];

            let inputelement=document.forms["form1"]["hobby"];

            

      function name_validate()
      {
            let namepattern = /^[A-Za-z]{2,}$/;
            if(name1.value == "")
            {
                  document.getElementById("errorname").innerHTML = "Name Should Not be Empty";
                  return false;
            }
            else if(namepattern.test(name1.value) == false)
            {
                  document.getElementById("errorname").innerHTML = "Name Should be Characters Only";
                  return false;
            }
            else
            {
                  document.getElementById("errorname").innerHTML = "";
                  return true;
            }
      }

      function email_validate()
      {
            // for mobile pattern = /^[789]{3}[0-9]{7}$/;
            // (123) 456-7890 = /^\(\d\d\d\) \d\d\d-\d\d\d\d$/

            let emailPattern = /^[a-z0-9._-]+@[a-z0-9.-]+\.[a-zA-Z]{2,4}$/;
            if(email1.value == "")
            {
                  document.getElementById("erroremail").innerHTML = "Email Should Not be Empty";
                  return false;
            }
            else if(emailPattern.test(email1.value) == false)
            {
                  document.getElementById("erroremail").innerHTML = "Invalid Email Format";
                  return false;
            }
            else
            {
                  document.getElementById("erroremail").innerHTML = "";
                  return true;
            }
      }

      function age_validate()
      {
            let agepattern = /^[0-9]{2}$/;
            if(age1.value == "")
            {
                  document.getElementById("errorage").innerHTML = "Age Should Not be Empty";
                  return false;
            }
            else if(agepattern.test(age1.value) == false)
            {
                  document.getElementById("errorage").innerHTML = "Age Should be Numeric Only";
                  return false;
            }
            else
            {
                  document.getElementById("errorage").innerHTML = "";
                  return true;
            }
      }

      function create_table()
      {
            let tableHTML = `
                  <table id="dataTable" border="1" style="border-collapse: collapse; width: 50%; margin-top: 20px;">
                        <thead style="background-color: #f2f2f2;">
                        <tr>
                              <th>Name</th>
                              <th>Email</th>
                              <th>Age</th>
                              <th>Gender</th>
                              <th>Course</th>
                              <th>Hobbies</th>
                        </tr>
                        </thead>
                        <tbody id="tableBody"></tbody>
                  </table>`;

            document.getElementById("display2").innerHTML = tableHTML;
      }

      let tableCreated = false;

      function show_data()
      {
            let hobbies = "";
            for(let i=0; i<inputelement.length; i++)
            {
                  if(inputelement[i].checked)
                  {
                        hobbies += " " + inputelement[i].value;
                  }
            }

            if(name_validate() == true && email_validate() == true && age_validate() == true)
            {
                  if(male1.checked==true || female1.checked==true)
                  {
                        gender1 = male1.checked ? "Male" : "Female";

                        if(course1.value != "Select Course")
                        {
                              if(hobbies != "")
                              {
                                    if(tableCreated == false)
                                    {
                                          create_table();
                                          tableCreated = true;
                                    }

                                    let tableBody = document.getElementById("tableBody");

                                    // Add a new row with user data
                                    let newRow = `
                                          <tr>
                                          <td>${name1.value}</td>
                                          <td>${email1.value}</td>
                                          <td>${age1.value}</td>
                                          <td>${gender1}</td>
                                          <td>${course1.value}</td>
                                          <td>${hobbies}</td>
                                          </tr>`;

                                    tableBody.innerHTML += newRow;
                                          
                                    // document.getElementById("display2").innerHTML = "Name : " + name1.value + "<br>" + 
                                    //                                                 "Email : " + email1.value + "<br>" +
                                    //                                                 "Age : " + age1.value + "<br>" +
                                    //                                                 "Gender : " + gender1 + "<br>" + 
                                    //                                                 "Course : " + course1.value + "<br>" +
                                    //                                                 "Hobbies : " + hobbies + "<br>";

                                    document.getElementById("display_invalid").innerHTML = "";
                                    document.getElementById("errorgender").innerHTML = "";
                                    document.getElementById("errorcourse").innerHTML = "";
                                    document.getElementById("errorhobby").innerHTML = "";

                                    name1.value = "";
                                    email1.value = "";
                                    age1.value = "";
                                    male1.checked = false;
                                    female1.checked = false;
                                    course1.value = "Select Course";
                                    for (let i = 0; i < inputelement.length; i++)
                                    {
                                          inputelement[i].checked = false;
                                    }
                              }
                              else
                              {
                                    document.getElementById("errorgender").innerHTML = "";
                                    document.getElementById("errorcourse").innerHTML = "";
                                    document.getElementById("errorhobby").innerHTML = "Hobby is Not Selected";
                                    document.getElementById("display_invalid").innerHTML = "Invalid Input";
                                    document.getElementById("display2").innerHTML = "";
                              }
                        }
                        else
                        {
                              document.getElementById("errorgender").innerHTML = "";
                              document.getElementById("errorhobby").innerHTML = "";
                              document.getElementById("errorcourse").innerHTML = "Course is Not Selected";
                              document.getElementById("display_invalid").innerHTML = "Invalid Input";
                              document.getElementById("display2").innerHTML = "";
                        }
                  }
                  else
                  {
                        document.getElementById("errorgender").innerHTML = "";
                        document.getElementById("errorhobby").innerHTML = "";
                        document.getElementById("errorgender").innerHTML = "Gender is Required";
                        document.getElementById("display_invalid").innerHTML = "Invalid Input";
                        document.getElementById("display2").innerHTML = "";
                  }
            }
            else
            {
                  document.getElementById("display_invalid").innerHTML = "Invalid Input";
                  document.getElementById("display2").innerHTML = "";
            }
        }
    </script>
</body>
</html>